=head1 NAME

Bric::Changes - Bricolage Changes

=head1 VERSION

$Revision$

=head1 DATE

$Date$

=head1 DESCRIPTION

This document lists the Changes to Bricolage introduced with each release.

=head1 VERSION 1.2.1

=head2 New Features

=over 4

=item *

Created new method of configuring Bricolage in Apache. For mod_perl 1.26 and
earlier, a custom config file will be written to the bricolage temp directory
every time Bricolage is started or restarted. For mod_perl 1.27 and later, no
temp file will be written. [David]

=item *

Added support for Mozilla (and there was much rejoicing!). [David]

=item *

Changed password for the default "admin" user to "change me now!" [David]

=item *

The slug is stored in the database for both fixed and non-fixed stories. This is
in anticipation of adding the ability to use the slug for fixed story URIs later
on. Thanks to Darren Graves for the patch.

=item *

Added DISABLE_NAV_LAYER directive. It's off by default, but if you turn it on in
bricolage.conf, the side navigation layer will be rendered as plain HTML in
every page instead of as a separate layer. [David]

=item *

Documented PERL_LOADER directive in Bric::AdvTemplates. [David]

=back

=head2 Bug Fixes

=over 4

=item *

Turned off the PREVIW_MASON configuration directive in bricolage.conf. It should
be off by default. [David]

=item *

Deleted Output Channels now properly don't show up in the Output Channel manager
again. Thanks to Sara for the spot! [David]

=item *

All previews now preview assets in the primary Output Channel only. Previously,
the previews were in the Output Channel whose name came first alphabetically.
Thanks to Sara Wood for catching this bug. [David]

=item *

Fixed bug where templates often couldn't be found by the Mason burner if the
output channel had a post_path. [David]

=item *

Fixed bug where templates often couldn't be found by the HTML::Template burner
if the output channel had a post_path. [Sam]

=item *

Fixed some problems with the sideNav menus under Netscape. [David]

=item *

Fixed broken "Preview" button in Read-only story profile and in related story
elements. [Matt Vella]

=item *

Updated debugging code to accommodate new syntax in Cache::Cache. Thanks to Sam
Tregar for the spot. [David]

=item *

Fixed problem with Element names containing non-alphanumeric characters. [Sam]

=item *

Checking out media assets from "Find Media" now redirects you to the media
profile if you've checked out one media asset, or My Workspace if you've checked
out more than one. This puts it in line with how "Find Stories" and "Find
Templates" work. Thanks to Sam for the report. [David]

=item *

Fixed bulk edit functionality for Media assets. Thanks to Sam for the spot.
[David]

=item *

In Bric::Biz::Asset::Business, the source get_meth key in my_meths() now works
properly. Also, get_all_keywords() now also returns the category keywords as
well as the story keywords. Thanks to Darren Graves for the patch.

=item *

Removed quotation marks from DEF_MEDIA_TYPE setting in bricolage.conf. Thanks to
Darren Graves for the spot. [David]

=item *

Sorting assets by ID in "Find X" and Workspace/Desk view now properly does a
numeric sort rather than an alphanumeric sort. Thanks to Sam Tregar for the
spot. [David]

=item *

Fixed an obscure bug where, for files uploaded as part of a Media file,
Bricolage attempted to create a path on its own file system using path
delimiters for another file system. Thanks to Mike Slattery for the spot.
[David]

=item *

Required content fields in stories and elements are now displayed in the order
specified in the Element profile. Thanks to Sam Tregar for the spot. [David]

=item *

All assets now start with the version number 0 until the first time they are
checked in. Also, they will show up on desks and in the Find views after the
first time they are saved. It was inconsistent before, and some items could not
be seen in the desk and Find views until they were checked in. Thanks to Sam for
spotting the inconsistency. [David]

=item *

The bric_clean_tmp script has been changed to avoid deleting the Bricolage
cache file.  [Sam]

=item *

Fixed typo that broke Bric::Dist::Client. [Mike Slattery]

=item *

Fixed multiple select custom fields for Elements and Contributors. Thanks to
Mike Slattery for the spot. [David]

=item *

Fixed ugly bug where deleting a "Media Type" Element would delete all the media
objects of that type. Thanks to Sam for the spot (though not for the bug!).
[David]

=item *

Fixed bric_pgimport so that it uses DBI to drop and create the database, rather
than relying on a hard-coded location for pgsql binaries. [David]

=item *

Fixed permission granting in bric_pgimport so that the Bricolage database use
has DELETE permissions on all objects in the Bricolage database. It looks like
this permission was ignored in PosgreSQL 7.1 and earlier, or problems would have
shown up a long time ago! [David]

=item *

Fixed a bug where the time a distribution job is scheduled was not properly
converted to UTC for storage in the database. Thanks to Mike Slattery for the
great code archaeology! [David]

=item *

Fixed the spelling of "contributor" in several spots. [Andrew Baio]

=back

=head1 VERSION 1.2.0

=head2 New Features

=over 4

=item *

Added Context-sensitive, online help. [Sam]

=item *

Added separate interface for editing templates (via FTP). [Sam]

=item *

Added the ability to use HTML::Template Templates. [Sam]

=item *

Added ability for differnt Output Channels to function as different component
roots for in Mason templates. This will allow for templates that can't be found
in the current Output Channel to be searched for in other Output Channels.
[David]

=item *

Added link to Event log to Find Story, Find Template, and Find Media screens.
[David]

=item *

Added true previewing for media assets. Now, when you click their URIs to
preview them, they will be distributed to the preview server(s) before
redirecting the user to them, rather than just serving them up from where they
live on the Bricolage file system. The latter can still be accessed under
"Download" in the Media Asset profile. This will continue to be the preferred
way to grab media files for editing and such, as it will not incur the overhead
of distributing the media file. [David]

=item *

Allow only one template with a given name for a given category, element, burner
and output channel. [Sam]

=item *

Added a Maintainer section to the About page. [David]

=item *

Updated About page to mimic the layout of the help pages. [David]

=back

=head2 Bug Fixes

=over 4

=item *

Fixed a bug with local previews where a preview page could show up instead of
the Bricoalge UI. Thanks to Sara for the spot. [David]

=item *

Fixed a bug where Mason component calls failed in previews when the
PREVIEW_MASON directive was enabled. [David]

=item *

Changed default value for text area fields added via the form builder (i.e., in
Contributor Type and Element profiles) to 0. The values 0 and "" always make the
the new field unlimited in length. [David]

=item *

Fixed a couple of buttons to be proper case rather than upper case. [David]

=item *

Separated the filesystem destinations for assets burned for publication and for
assets burned for previewing. This will prevent someone previewing and stomping
all over a published version of an asset before the published version is
distributed. [David]

=item *

Removed hard-coding of the local preview directory in httpd.conf and
httpd-ssl.conf. Now using the values stored in PREVIEW_LOCAL, instead, to
determine the proper directory. [David]

=item *

Added the DEF_MEDIA_TYPE directive. Bricolage will use the value in this
directive to assign a Media Type to all file resources if they Bricolage can't
figure it out from their file extentions. This fixes a bug where Bricolage would
choke if it couldn't figure out the MediaType itself. [David]

=back

=head1 VERSION 1.0.2

=head2 New Features

=over 4

=item *

Added "File Name" and "File Extension" properties to OutputChannels. These
properties will now be used to name files burned to the file system on
preview and publish. [David]

=item *

Added DEFAULT_FILENAME and DEFAULT_FILE_EXT configuration directives to set
default values on the "File Name" and "File Extenstion" Output Channel
properties. [David]

=item *

Changed Bric::Util::Burner->display_element() so that it doesn't paginate. All
paginated pages are now treated instead as regular elements. This is useful for
things like printer-freindly pages. Bric::Util::Burner->display_element()
contines to work as before. Use this method to output a separate file for each
paginated element. [David]

=item *

When errors occur while previewing stories, the leftNav is now turned off.
[David]

=item *

Browser buttons and menus are now disabled. [David]

=item *

Added ability to set permissions on assets based on the categories they're in.
[David]

=item *

Moved all session and session locking files into the "bricolage" subdirectory of
the local file system's tmp directory. You'll want to rm -rf /tmp/bricolage_*
upon upgrading. [David]

=item *

Moved the location of cache files to the "bricolage/cache" subdirectory of the
local file system's tmp directory. You'll want to rm -rf /tmp/FileCache upon
upgrading. Together with the above change, this means that all Bricolage
temporary files are stored in the "bricolage" subdirectory of the local tmp,
e.g., /tmp/bricolage. [David]

=item *

Added new program, bric_clean_tmp, that can be used in a cron job to delete
stale temporary files. [Sam]

=item *

Added an "About" page, linked from the logo graphic, that explains the name
"Bricolage" and offers the license and credits. [David]

=item *

Added PERL_LOADER configuration directive. Pass a line of Perl to this
directive, and on startup, it'll execute it in the same namespace as your
templates execute in. [David]

=item *

Added INCLUDE_XML_WRITER and XML_WRITER_ARGS configuration parameters. If
INCLUDE_XML_WRITER is turned on, then all templates will include a new global,
$writer, that is an XML::Writer object. This object is provided as a convenience
for creating XML in your templates. XML_WRITER_ARGS allows certain arguments to
be passed to the XML::Writer instantiator. See Bric::AdvTemplates for more
information. [David]

=item *

Added URI information to associated categories in the story profile. [David]

=item *

Changed category selection for new Templates to use the category URI rather than
the name, in line with how Story and Media work. [David]

=item *

Added "Save and Stay" button to the Element Profile. [David]

=item *

Story Type, Media Type, and Element select lists are now filtered for READ
permission in the Story, Media, and Template profiles, respectively. [David]

=item *

Category select lists are filtered for READ permission in the Story, Media, and
Template profiles. [David]

=item *

Category and Story Type, Media Type, and Element select lists are now required
fields where appropriate in the Story, Media, and Template profiles. This change
was introduced because, with the introduction of permission checking on these
select lists, it's possible for them to show up empty where it wasn't possible
before. [David]

=item *

Renamed programs in bin/ so that they all start with "bric_". Update any links
to the old names, because they're gone. [David]

=item *

Rewrote bric_apachectl to use Perl and Bric::Config instead of a shell script.
Also changed it so that a restart is always a hard restart. [Sam]

=item *

Added name of Output Channel to list of Templates in Find Templates interface.
[David]

=item *

Changed behavior of sideNav to Limit rendering of Workflows permissions. If a
user doesn't have READ permission on Workflow, it won't show up in the display.
[David]

=item *

Added URI to all media profile views. [David]

=item *

Added ability to change the category association in Templates. [David]

=item *

Changed the Notes icon in Story, Media, and Template profiles to a graphical
representation of a note. When there are no notes associated with the asset, the
graphic is an empty note. When there are notes associated with the asset, then
there is writing on the note. This allows editors to see at a glance if there
are any existing notes. [David]

=item *

Made SSL optional (and off by default). [Sam]

=item *

Change the term "attribute" to "field" in the UI. [David].

=back

=head2 Bug Fixes

=over 4

=item *

Fixed bug where cancelled checkouts of template appeared to work in some views,
but not others. Thanks to Matt Vella for the report. [David]

=item *

Fixed bug where story titles were accentally getting bogus hyperlinking markup.
Thanks to Chris Brody for the report. [David]

=item *

Fixed a bug where the "Generic" check box on the "New Template" screen was
partially ignored, leading to possibly corrupted data, and at least to the
inability to create autohandlers. Thanks to Sam Tregar for the bug report that
led to finding this bug. [David]

=item *

Fixed bug where element checkboxes weren't remembering if they were checked or
not. Thanks to Matt Vella for the spot. [David]

=item *

Fixed bug where element select lists weren't populate with their list of values.
Thanks to Matt Vella for the report. [David]

=item *

Fixed select lists and radio buttons in formBuilder so that they can take just
values as well as value/name pairs. [David]

=item *

Fixed issue with date fields not geting populated when hours and minutes weren't
selected. Also improvied handling fo partial date fields in Elements. Thanks to
Matt Vella for the heads-up. [David]

=item *

Fixed bug where only one required data field was included in a new story. Thanks
to Matt Vella for the report. [David]

=item *

Removed the CVS $Log entries from all files, as these were likely to cause
conflicts between branches and because few end users will be interested in
seeing them in the docs, anyway. [Sam and David]

=item *

Fixed bug where new workflows weren't able to add new desks, but were showing up
in the side nav before "Save" was clicked. Thanks to Chris Brody for the
heads-up. [David]

=item *

Fixed bug where workflows deleted via the Workflow Manager (rather than the
Workflow Profile) continued to show up in the side nav. Thanks to Sam Tregar for
the spot. [David]

=item *

Fixed bug where data fields deleted from Elements were deleting them from
existing stories, too. [David]

=item *

Fixed bug where stories with related media associated with them were displaying
the story as an Element rather than as a story after editing the related media.
[David]

=item *

Removed all file system location dependencies for the operation of Bricolage.
Bricolage will still assume that everything's in /usr/local/bricolage, but any
location is fine as long as the BRICOLAGE_ROOT environment variable is set to
the proper location. [David]

=item *

Added code to force all preview pages to be re-requested from the server every
time they're viewed. This prevents the browser from loading older versions from
its cache, and allows users to always see the most recently-burned output of a
story. [David]

=item *

Removed debugging information from URLs for when debugging is turned off --
which should be always in production code (e.g., releases). [David]

=item *

Elements are now displayed with their display names rather than their attribute
names. Thanks to Sam Tregar for the spot. [David]

=item *

Fixed bug where fields (attributes) added to an Element with the name of an
existing but deactivated field triggered an error. Thanks to Sam for the
heads-up. [David]

=item *

Fixed a bug where data fields sometimes were not propery retreived from the
database in Bric::Biz::AssetType. [David]

=item *

Fixed a bug where clicking "Save and Stay" in the Element profile wouldn't
delete attributes (fields) marked as such, or even delete the Element itself, if
the "Delete this profile" checkbox was checked.

=item *

Fixed a bug where, for Story and Media assets, editors were given Edit access to
notes, even when they didn't have the asset checked out. [David]

=item *

Changed the misleading and inaccurate "Two blank lines" label in the Bulk Edit
interface to the more accurate "One blank line". Thanks to Sam Tregar for the
heads-up.

=back

=head1 VERSION 1.0.1

=over 4

=item *

Initial public release.

=back

=head1 AUTHOR

David Wheeler <david@wheeler.net>

=head1 SEE ALSO

L<Bric|Bric>

=cut
