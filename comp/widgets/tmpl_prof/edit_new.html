<%perl>
$m->comp('/widgets/wrappers/sharky/table_top.mc',
	 'caption' => 'Properties',
	 'number'  => 1);
$m->out($ieSpacer);
$m->comp('/widgets/select_object/select_object.mc',
	 object    => 'element',
	 name      => $widget.'|at_id',
	 field     => 'name',
	 reset_key => $rk,
         req       => 1,
         exclude   => $excl_media_sub,
	 disp      => 'Element');
$m->out($ieSpacer);
</%perl>
<table border="0" width="578" cellpadding=0 cellspacing=0>
<tr>
  <td align="right" width="<% $infoIndent %>"><span class=label>Generic:</span></td>
  <td width="<% 578 - $infoIndent %>"><& '/widgets/profile/checkbox.mc', name => $widget.'|no_at', value => 1 &>
  (not associated with any of the above elements)
  </td>
</tr>
</table>
<%perl>
$m->out($ieSpacer);
$m->comp('/widgets/profile/displayFormElement.mc',
	 key => "file_type",
	 vals => {
               disp  => "File Type",
               value => 'mc',
               props => { 
                          type => 'select',
                          vals => {
                                    'mc'   => 'Mason Component (.mc)',
                                    'pl'   => 'HTML::Template Script (.pl)',
                                    'tmpl' => 'HTML::Template Template (.tmpl)'
                                  }
                         }
         });
$m->out($ieSpacer);

$m->comp('/widgets/select_object/select_object.mc',
	 'object'    => 'output_channel',
	 'name'      => $widget.'|oc_id',
	 'field'     => 'name',
	 'reset_key' => $rk,
         req         => 1,
	 'disp'      => 'Output Channel');
$m->out($ieSpacer);
$m->comp('/widgets/select_object/select_object.mc',
	 'object'    => 'category',
         'name'      => $widget.'|cat_id',
	 'reset_key' => $rk,
         'field'     => 'uri',
         exclude     => $excl_sub,
         req         => 1,
	 'disp'      => 'Category');
$m->out($ieSpacer);
$m->comp('/widgets/profile/displayFormElement.mc',
	 key => "priority",
	 vals => $pmeth);
$m->out($ieSpacer);
$m->comp('/widgets/wrappers/sharky/table_bottom.mc');

$m->comp("/widgets/wrappers/sharky/table_top.mc",
  	 caption => "Submit",
	 number  => 2,
	 ghostly => 1);
</%perl>
<table width=<% FIELD_INDENT + 150 %> cellpadding=0 cellspacing=0>
<tr>
  <td width="<% FIELD_INDENT - 10%>"><img src="/media/images/spacer.gif" width="<% FIELD_INDENT - 10%>" height="1" /></td>
  <td width=150><input type="image" src="/media/images/create_red.gif" border=0 name="<% $widget %>|create_cb"></td>
</tr>
</table>

<%args>
$widget
</%args>

<%init>;
my $rk = get_state_data($widget, 'reset_key');
# browser spacing stuff
my $agent = $m->comp("/widgets/util/detectAgent.mc");
my $ieSpacer = ($agent->{os} ne "SomeNix") ? qq{<table><tr><td colspan=2><img src="/media/images/spacer.gif" width=5 height=5 /></td></tr></table>} : '';
my $infoIndent = ($agent->{browser} eq "Netscape") ? FIELD_INDENT - 7 : FIELD_INDENT;
</%init>

<%once>;
my $pmeth = { %{ Bric::Biz::Asset::Formatting->my_meths->{priority} } };
$pmeth->{value} = 3;
my $excl_sub = sub { ! chk_authz($_[0], READ, 1) };
my $excl_media_sub = sub { $_[0]->is_media || ! chk_authz($_[0], READ, 1) };
</%once>
